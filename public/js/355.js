(self.webpackChunk=self.webpackChunk||[]).push([[355],{355:(s,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});const r={name:"Login",data:function(){return{phone:"",password:"",showPass:!1,loading:!1,errors:[]}},methods:{submit:function(){var s=this;this.loading=!0;var e=this.getPhone();axios.get("/csrf-cookie").then((function(){axios.post("/api/login",{phone:e,password:s.password}).then((function(e){s.loading=!1,e.data.status?(s.$store.dispatch("login",e.data.user),s.$router.push({name:"dashboard"})):s.errors=e.data.errors})).catch((function(e){s.loading=!1,s.errors=e.response.data.errors}))})).catch((function(e){s.$store.dispatch("showAlert",{isVisible:!0,msg:"CSRF error",color:"error",type:"error"})}))},getPhone:function(){return this.phone.replace(/[^0-9]/g,"")}}};const a=(0,o(900).Z)(r,(function(){var s=this,e=s.$createElement,o=s._self._c||e;return o("div",[o("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"374"}},[o("v-card-title",[s._v("Логин")]),s._v(" "),o("form",{staticClass:"pa-4"},[o("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{"error-messages":s.errors.phone,label:"Телефон",outlined:"","prepend-inner-icon":"mdi-cellphone"},model:{value:s.phone,callback:function(e){s.phone=e},expression:"phone"}}),s._v(" "),o("v-text-field",{attrs:{"error-messages":s.errors.password,"append-icon":s.showPass?"mdi-eye":"mdi-eye-off",type:s.showPass?"text":"password",label:"Пароль",counter:"",outlined:"","prepend-inner-icon":"mdi-lock"},on:{"click:append":function(e){s.showPass=!s.showPass}},model:{value:s.password,callback:function(e){s.password=e},expression:"password"}}),s._v(" "),o("v-btn",{staticClass:"mt-4",attrs:{loading:s.loading,disabled:s.loading,color:"primary"},on:{click:s.submit}},[s._v("\n                Войти\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);