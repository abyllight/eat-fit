"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[365],{3455:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(1519),s=n.n(a)()((function(t){return t[1]}));s.push([t.id,"table[data-v-6e772477],td[data-v-6e772477]{border:1px solid #000}",""]);const o=s},2365:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var a=n(9669),s=n.n(a);const o={name:"Report",data:function(){return{max:null,date:(new Date).toISOString().split("T")[0],hasAmount:!1,payType:null,menu:!1,couriers:[],fact:null,fact_loading:!1,types:[]}},created:function(){this.getFact(),this.fetchReports()},methods:{fetchReports:function(){var t=this;s().get("/api/reports").then((function(e){t.couriers=e.data.reports,t.types=e.data.types})).catch((function(t){console.log(t)}))},filter:function(){var t=this;s().post("/api/reports/filter",{date:this.date,has_amount:this.hasAmount,type:this.payType}).then((function(e){t.menu=!1,t.couriers=e.data.reports})).catch((function(t){console.log(t)}))},excel:function(){s().get("/api/reports/export/"+this.date).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},getFact:function(){var t=this;s().get("/api/management/fact").then((function(e){t.fact=e.data.fact})).catch((function(t){console.log(t)}))},payFact:function(){var t=this;this.fact=!0,this.fact_loading=!0,s().post("/api/management/fact").then((function(e){t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"success",type:"success"}),location.reload()})).catch((function(t){console.log(t)})).finally((function(){t.fact=!1,t.fact_loading=!1}))}}};var l=n(3379),c=n.n(l),i=n(3455),r={insert:"head",singleton:!1};c()(i.Z,r);i.Z.locals;const u=(0,n(1900).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{staticClass:"d-flex align-center justify-space-between",attrs:{cols:"12",sm:"12"}},[n("div",{staticClass:"d-flex align-center"},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"Выберите дату","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),n("v-date-picker",{on:{input:function(e){t.menu=!1},change:t.filter},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),n("a",{staticClass:"ml-5",attrs:{type:"button",href:"/api/reports/export/"+t.date}},[n("v-btn",{attrs:{color:"primary"},on:{click:t.excel}},[t._v("\n                        Скачать отчет\n                    ")])],1)],1),t._v(" "),n("v-btn",{attrs:{color:"primary",disabled:t.fact,loading:t.fact_loading},on:{click:t.payFact}},[t._v("\n                фактический оплачено\n            ")])],1)],1),t._v(" "),n("v-row",[n("v-col",[n("v-switch",{attrs:{label:"Фактический оплачено"},on:{change:t.filter},model:{value:t.hasAmount,callback:function(e){t.hasAmount=e},expression:"hasAmount"}})],1),t._v(" "),n("v-col",[n("v-select",{attrs:{items:t.types,"item-value":"name","item-text":"name",label:"Тип оплаты",outlined:"",clearable:""},on:{change:t.filter},model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}})],1)],1),t._v(" "),t._l(t.couriers,(function(e){return n("v-row",{key:e.id},[n("v-col",[n("h3",[t._v(t._s(e[0]?e[0].courier+" - "+e.length:""))]),t._v(" "),n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("\n                                Имя\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Время\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Адрес\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Тип\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Сумма\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Статус отчета\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Время отчета\n                            ")]),t._v(" "),n("th",{staticClass:"text-left"},[t._v("\n                                Время Еду\n                            ")])])]),t._v(" "),n("tbody",[t._l(e,(function(e){return[n("tr",[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(e.time))]),t._v(" "),n("td",[t._v(t._s(e.address))]),t._v(" "),n("td",[t._v(t._s(e.type))]),t._v(" "),n("td",[t._v(t._s(e.amount))]),t._v(" "),n("td",[n("v-chip",{attrs:{label:"",small:"",color:e.report_color}},[t._v("\n                                     "+t._s(e.report_status)+"\n                                 ")])],1),t._v(" "),n("td",[t._v("\n                                 "+t._s(e.reported_at)+"\n                                 "),n("v-chip",{attrs:{label:"",small:"",color:e.report_time_color}},[t._v("\n                                     "+t._s(e.report_time_status)+"\n                                 ")])],1),t._v(" "),n("td",[t._v("\n                                 "+t._s(e.notified_at)+"\n                                 "),n("v-chip",{attrs:{label:"",small:"",color:e.notification_color}},[t._v("\n                                     "+t._s(e.notification_status)+"\n                                 ")])],1)]),t._v(" "),n("tr",{staticClass:"grey lighten-3"},[n("td",{attrs:{colspan:"10"}},[t._v(t._s(e.comment))])])]}))],2)]},proxy:!0}],null,!0)})],1)],1)}))],2)}),[],!1,null,"6e772477",null).exports}}]);