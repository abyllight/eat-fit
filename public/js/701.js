"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[701],{9701:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});var c=s(7757),a=s.n(c);function n(t,e,s,c,a,n,i){try{var o=t[n](i),l=o.value}catch(t){return void s(t)}o.done?e(l):Promise.resolve(l).then(c,a)}const i={name:"PurchaseList",data:function(){return{purchase:{},loading:!1,modal:!1,item:{},left:null}},mounted:function(){this.fetchIngredients()},methods:{fetchIngredients:function(){var t=this;axios.get("/api/purchase-list-kitchen").then((function(e){t.purchase=e.data,console.log(t.purchase)})).catch((function(t){console.log(t)}))},calculatePurchase:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,axios.get("/api/purchase-list-kitchen/calculate").then((function(t){e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"success",type:"success"}),e.loading=!1,e.fetchIngredients()})).catch((function(t){}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,s=arguments;return new Promise((function(c,a){var i=t.apply(e,s);function o(t){n(i,c,a,o,l,"next",t)}function l(t){n(i,c,a,o,l,"throw",t)}o(void 0)}))})()},openModal:function(t){this.modal=!0,this.item=t,this.left=t.left},save:function(){var t=this;axios.post("/api/purchase-list-kitchen/left",{i_id:this.item.id,p_id:this.purchase.id,left:this.left}).then((function(e){t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"success",type:"success"}),t.modal=!1,t.item={},t.fetchIngredients()})).catch((function(t){console.log(t)}))}}};const o=(0,s(1900).Z)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticClass:"d-flex align-center justify-space-between mb-10"},[s("h1",{},[t._v(t._s(t.purchase.cuisine)+" - "+t._s(t.purchase.date))]),t._v(" "),s("v-btn",{attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.calculatePurchase}},[t._v("\n                    Get\n                ")])],1)])],1),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12"}},t._l(t.purchase.ingredients,(function(e,c){return s("v-card",{key:e.id,staticClass:"mb-4",attrs:{color:e.diff?"":"grey lighten-1"},on:{click:function(s){return t.openModal(e)}}},[s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("h3",[t._v(t._s(c+1)+". "+t._s(e.name))])]),t._v(" "),s("v-col",{attrs:{cols:"12",md:"2"}},[s("h5",{staticClass:"text-uppercase"},[t._v("Остаток:")]),t._v(" "),s("strong",{staticClass:"blue--text"},[t._v(t._s(e.left))])]),t._v(" "),s("v-col",{attrs:{cols:"12",md:"2"}},[s("h5",{staticClass:"text-uppercase"},[t._v("Итого:")]),t._v(" "),s("strong",{staticClass:"red--text"},[t._v(t._s(e.total))])]),t._v(" "),s("v-col",{attrs:{cols:"12",md:"2"}},[s("h5",{staticClass:"text-uppercase"},[t._v("Нужно взять:")]),t._v(" "),s("strong",{staticClass:"green--text"},[t._v(t._s(e.diff))])])],1)],1)],1)})),1)],1),t._v(" "),s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{scrollable:"","max-width":"500px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("v-card",[s("v-card-title",[t._v(t._s(t.item.name))]),t._v(" "),s("v-divider"),t._v(" "),s("v-card-text",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mt-5",attrs:{outlined:"",clearable:"",type:"number"},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}})],1)],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-card-actions",[s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.modal=!1}}},[t._v("\n                        Закрыть\n                    ")]),t._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("\n                        Сохранить\n                    ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports}}]);