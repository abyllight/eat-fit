"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5],{2005:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(7757),s=n.n(i),r=n(1306);function a(e,t,n,i,s,r,a){try{var o=e[r](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,s)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var r=e.apply(t,n);function o(e){a(r,i,s,o,l,"next",e)}function l(e){a(r,i,s,o,l,"throw",e)}o(void 0)}))}}const l={name:"CuisineDishesCreate",components:{TiptapVuetify:r.CL},props:{id:Number,r_id:Number},data:function(){return{ingredients:[],departments:[],all_rations:[],loading:!1,disabled:!1,errors:[],sizes:[{id:1,name:"XS",val:null},{id:2,name:"S",val:null},{id:3,name:"M",val:null},{id:4,name:"L",val:null},{id:5,name:"XL",val:null}],dish:{cuisine_id:null,name:null,ration_id:null,department_id:null,ingredient_ids:[],is_custom:!1,description:null},extensions:[r.Ay,r.V6,r.rU,r.v6,r.Re,r.Tx,r.HC,r.DY,r.GS,[r.X6,{options:{levels:[1,2,3]}}],r.d8,r.EK,r.bo,r.nv,r.U1]}},created:function(){this.getIngredients(),this.getDepartments(),this.getAllRations()},methods:{getIngredients:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/ingredients").then((function(t){e.ingredients=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getDepartments:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/departments").then((function(t){e.departments=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getAllRations:function(){var e=this;return o(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/rations").then((function(t){e.all_rations=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;this.dish.cuisine_id=this.id,this.dish.ration_id=this.r_id,this.dish.sizes=this.sizes,axios.post("/api/dishes",this.dish).then((function(t){e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"green",type:"success"}),t.data.status?e.$router.push({name:"cuisine_dishes",params:{id:e.dish.cuisine_id}}):e.errors=t.data.errors})).catch((function(t){console.log(t),e.errors=t.response.data.errors}))}}};const d=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",[n("v-btn",{on:{click:function(t){return e.$router.back()}}},[e._v("\n                Назад к кухне\n            ")])],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{sm:"12",lg:"8"}},[n("v-text-field",{attrs:{label:"Название","error-messages":e.errors.name,outlined:"",clearable:""},model:{value:e.dish.name,callback:function(t){e.$set(e.dish,"name",t)},expression:"dish.name"}}),e._v(" "),n("v-select",{attrs:{items:e.all_rations,"item-text":"name","item-value":"id",outlined:"",disabled:"",label:"Рационы"},model:{value:e.r_id,callback:function(t){e.r_id=t},expression:"r_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.departments,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Цех","error-messages":e.errors.department_id},model:{value:e.dish.department_id,callback:function(t){e.$set(e.dish,"department_id",t)},expression:"dish.department_id"}}),e._v(" "),n("div",[n("v-row",e._l(e.sizes,(function(t){return n("v-col",{key:t.name},[n("v-text-field",{attrs:{type:"number",label:t.name,outlined:"",clearable:"",dense:""},model:{value:t.val,callback:function(n){e.$set(t,"val",n)},expression:"size.val"}})],1)})),1)],1),e._v(" "),n("v-autocomplete",{attrs:{items:e.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"","small-chips":"",label:"Ингредиенты","error-messages":e.errors.ingredient_ids,multiple:""},model:{value:e.dish.ingredient_ids,callback:function(t){e.$set(e.dish,"ingredient_ids",t)},expression:"dish.ingredient_ids"}}),e._v(" "),n("tiptap-vuetify",{attrs:{extensions:e.extensions},model:{value:e.dish.description,callback:function(t){e.$set(e.dish,"description",t)},expression:"dish.description"}}),e._v(" "),n("v-btn",{staticClass:"mt-5",attrs:{color:"primary"},on:{click:e.create}},[e._v("\n                Сохранить\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);