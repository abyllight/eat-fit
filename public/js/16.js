"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[16],{3016:(t,i,n)=>{n.r(i),n.d(i,{default:()=>c});var e=n(7757),s=n.n(e);function r(t,i,n,e,s,r,a){try{var o=t[r](a),c=o.value}catch(t){return void n(t)}o.done?i(c):Promise.resolve(c).then(e,s)}function a(t){return function(){var i=this,n=arguments;return new Promise((function(e,s){var a=t.apply(i,n);function o(t){r(a,e,s,o,c,"next",t)}function c(t){r(a,e,s,o,c,"throw",t)}o(void 0)}))}}const o={name:"CuisineDishes",props:["id"],data:function(){return{left_rations:[],all_rations:[],cuisine:{},dish:{name:"",cuisine_id:0,ration_id:0,code:"",department_id:0,ingredients:[],is_custom:!1},dishes:[],loading:!1,disabled:!1,dialog:!1,dialogSm:!1,errors:[],targetDish:{}}},mounted:function(){this.getCuisine(),this.getAllRations()},methods:{getCuisine:function(){var t=this;return a(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,axios.get("/api/cuisines/"+t.id).then((function(i){t.cuisine=i.data.data,t.dishes=t.cuisine.dishes,t.dish=t.dishes[0],t.left_rations=t.cuisine.left_rations})).catch((function(t){console.log(t)}));case 2:case"end":return i.stop()}}),i)})))()},getAllRations:function(){var t=this;return a(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,axios.get("/api/rations").then((function(i){t.all_rations=i.data})).catch((function(t){console.log(t)}));case 2:case"end":return i.stop()}}),i)})))()},fetchDishesByCuisineId:function(t){var i=this;return a(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.disabled=!0,i.loading=!0,n.next=4,axios.get("/api/dishes/iiko/cuisine/"+t).then((function(t){i.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:t.data.status?"green":"error",type:t.data.status?"success":"error"}),i.getCuisine()})).catch((function(t){console.log(t)})).finally((function(){i.disabled=!1,i.loading=!1}));case 4:case"end":return n.stop()}}),n)})))()},fetchIngredientsByCuisine:function(){var t=this;return a(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.disabled=!0,t.loading=!0,i.next=4,axios.get("/api/ingredients/iiko/"+t.id).then((function(i){t.$store.dispatch("showAlert",{isVisible:!0,msg:i.data.msg,color:i.status?"green":"error",type:i.status?"success":"error"}),t.getCuisine()})).catch((function(t){console.log(t)})).finally((function(){t.disabled=!1,t.loading=!1}));case 4:case"end":return i.stop()}}),i)})))()},setDish:function(t){this.dish=t},editDish:function(t){this.$router.push({name:"cuisine_dishes_edit",params:{id:t}})},addDish:function(t){this.$router.push({name:"cuisine_dishes_create",params:{id:this.cuisine.id,r_id:t}})}}};const c=(0,n(1900).Z)(o,(function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("v-row",[n("v-col",[n("v-btn",{on:{click:function(i){return t.$router.back()}}},[t._v("\n                Назад к кухням мира\n            ")])],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{sm:"12",md:"6"}},[n("v-card",{staticClass:"blue-grey lighten-4",attrs:{loading:t.loading,disabled:t.disabled}},[n("v-card-title",[t._v(t._s(t.cuisine.name))]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:function(i){return t.fetchDishesByCuisineId(t.cuisine.id)}}},[n("v-icon",{attrs:{dark:"",left:""}},[t._v("\n                            mdi-refresh\n                        ")]),t._v("\n                        Получить блюда\n                    ")],1),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.fetchIngredientsByCuisine}},[n("v-icon",{attrs:{dark:"",left:""}},[t._v("\n                            mdi-refresh\n                        ")]),t._v("\n                        Получить ингредиенты\n                    ")],1)],1)],1),t._v(" "),t.dishes.length>0?n("v-card",{staticClass:"mt-4",attrs:{disabled:t.disabled}},[n("v-list",t._l(t.dishes,(function(i,e){return n("v-list-item",{key:i.id,on:{click:function(n){return t.setDish(i)}}},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e+1)+". "+t._s(i.name))]),t._v(" "),i.ration?n("v-list-item-subtitle",[n("span",{staticClass:"font-weight-bold"},[t._v("["+t._s(i.ration.name)+"] "+t._s(i.i_name))])]):t._e()],1),t._v(" "),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return t.editDish(i.id)}}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-pencil")])],1)],1)],1)})),1)],1):t._e(),t._v(" "),t._l(t.left_rations,(function(i){return n("v-card",{key:i.id,staticClass:"mt-4",attrs:{disabled:t.disabled}},[n("v-card-title",[t._v(t._s(i.name))]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:"",rounded:"",outlined:""},on:{click:function(n){return t.addDish(i.id)}}},[t._v("\n                        Добавить\n                    ")])],1)],1)}))],2),t._v(" "),t.dish?n("v-col",{attrs:{sm:"12",md:"6"}},[n("v-card",{attrs:{disabled:t.disabled,loading:t.loading}},[n("v-card-title",[t._v(t._s(t.dish.name))])],1),t._v(" "),t.dish.ingredients.length>0?n("v-card",{staticClass:"mt-4",attrs:{disabled:t.disabled}},[n("v-list",t._l(t.dish.ingredients,(function(i,e){return n("v-list-item",{key:i.id},[n("v-list-item-content",[n("v-list-item-title",[n("strong",[t._v(t._s(e+1)+".")]),t._v(" "+t._s(i.name)+"\n                            ")])],1)],1)})),1)],1):t._e()],1):t._e()],1)],1)}),[],!1,null,null,null).exports}}]);