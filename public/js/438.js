"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[438],{7438:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var s=n(7757),r=n.n(s);function a(e,t,n,s,r,a,i){try{var o=e[a](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(s,r)}const i={name:"Users",data:function(){return{loading:!0,dialogDelete:!1,headers:[{text:"#",value:"index"},{text:"Имя",value:"name"},{text:"Телефон",value:"phone"},{text:"Роли",value:"r_names",sortable:!1},{text:"Действия",value:"actions",sortable:!1}],users:[],user:{},errors:[]}},mounted:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e,t=this;return(e=r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/users").then((function(e){var n;t.users=null!==(n=e.data.data)&&void 0!==n?n:[]})).catch((function(e){console.log(e)})).finally((function(){return t.loading=!1}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(s,r){var i=e.apply(t,n);function o(e){a(i,s,r,o,l,"next",e)}function l(e){a(i,s,r,o,l,"throw",e)}o(void 0)}))})()},create:function(){this.$router.push("users/create")},edit:function(e){this.$router.push("/users/"+e+"/edit")},closeDelete:function(){this.dialogDelete=!1},deleteUser:function(e){this.user=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;axios.delete("/api/users/"+this.user.id).then((function(t){e.dialogDelete=!1,e.user={},e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:t.data.status?"green":"error",type:t.data.status?"success":"error"}),e.fetchUsers()})).catch((function(e){console.log(e)}))}}};const o=(0,n(1900).Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row"),e._v(" "),n("v-row",[n("v-col",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,loading:e.loading,"loading-text":"Loading... Please wait"},scopedSlots:e._u([{key:"item.index",fn:function(t){var n=t.index;return[e._v("\n                    "+e._s(n+1)+"\n                ")]}},{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Пользователи")]),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:e.create}},[e._v("\n                            Добавить\n                        ")]),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),e._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var s=t.item;return[s.is_admin?e._e():n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.edit(s.id)}}},[e._v("\n                        mdi-pencil\n                    ")]),e._v(" "),s.is_admin?e._e():n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteUser(s)}}},[e._v("\n                        mdi-delete\n                    ")])]}}])})],1)],1)],1)}),[],!1,null,null,null).exports}}]);