"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[619],{3619:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(7757),s=n.n(i);function r(e,t,n,i,s,r,a){try{var o=e[r](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(i,s)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var a=e.apply(t,n);function o(e){r(a,i,s,o,c,"next",e)}function c(e){r(a,i,s,o,c,"throw",e)}o(void 0)}))}}const o={name:"CuisineDishesEdit",props:["id"],data:function(){return{ingredients:[],departments:[],all_rations:[],cuisine:{},dish:{name:"",cuisine_id:0,ration_id:0,code:"",department_id:0,ingredients:[]},dishes:[],loading:!1,disabled:!1,errors:[]}},created:function(){this.getDish(),this.getIngredients(),this.getDepartments(),this.getAllRations()},methods:{getDish:function(){var e=this;return a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/dishes/"+e.id).then((function(t){e.dish=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getIngredients:function(){var e=this;return a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/ingredients").then((function(t){e.ingredients=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getDepartments:function(){var e=this;return a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/departments").then((function(t){e.departments=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},getAllRations:function(){var e=this;return a(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/rations").then((function(t){e.all_rations=t.data})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;axios.patch("/api/dishes/"+this.dish.id,this.dish).then((function(t){e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"green",type:"success"}),t.data.status?e.$router.push({name:"cuisine_dishes",params:{id:e.dish.cuisine_id}}):e.errors=t.data.errors})).catch((function(t){console.log(t),e.errors=t.response.data.errors}))}}};const c=(0,n(1900).Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",[n("v-btn",{on:{click:function(t){return e.$router.back()}}},[e._v("\n                Назад к кухне\n            ")])],1)],1),e._v(" "),n("v-row",[e.dish.i_name?n("v-col",{attrs:{sm:"12",lg:"4"}},[n("h3",[e._v(e._s(e.dish.i_name))]),e._v(" "),e._l(e.dish.original_ingredients,(function(t,i){return n("v-list-item",{key:t.id,class:e.dish.ingredient_ids.includes(t.id)?"":"yellow lighten-3",attrs:{dense:""}},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(i+1)+". "+e._s(t.name))])],1)],1)}))],2):e._e(),e._v(" "),n("v-col",{attrs:{sm:"12",lg:"8"}},[n("h2",{staticClass:"mb-5"},[e._v(e._s(e.dish.ration?e.dish.ration.name:""))]),e._v(" "),n("v-text-field",{attrs:{label:"Название","error-messages":e.errors.name,outlined:"",dense:"",clearable:""},model:{value:e.dish.name,callback:function(t){e.$set(e.dish,"name",t)},expression:"dish.name"}}),e._v(" "),n("v-select",{attrs:{items:e.all_rations,dense:"","item-text":"name","item-value":"id",outlined:"",label:"Рационы"},model:{value:e.dish.ration_id,callback:function(t){e.$set(e.dish,"ration_id",t)},expression:"dish.ration_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.departments,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Цех","error-messages":e.errors.department_id},model:{value:e.dish.department_id,callback:function(t){e.$set(e.dish,"department_id",t)},expression:"dish.department_id"}}),e._v(" "),n("v-autocomplete",{attrs:{items:e.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"","small-chips":"",label:"Ингредиенты","error-messages":e.errors.ingredient_ids,multiple:""},model:{value:e.dish.ingredient_ids,callback:function(t){e.$set(e.dish,"ingredient_ids",t)},expression:"dish.ingredient_ids"}}),e._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:e.update}},[e._v("\n                Сохранить\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports}}]);