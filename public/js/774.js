"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[774,935],{9935:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var n=i(7757),s=i.n(n),r=i(1306);function a(t,e,i,n,s,r,a){try{var o=t[r](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,s)}function o(t){return function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function o(t){a(r,n,s,o,l,"next",t)}function l(t){a(r,n,s,o,l,"throw",t)}o(void 0)}))}}const l={name:"Dishes",components:{TiptapVuetify:r.CL},data:function(){return{dishes:[],dish:{name:"",time:0,description:"",department:null,code:"",ingredients:[],is_custom:!0},ingredients:[],departments:[],rations:[],errors:[],edit:-1,dialog:!1,extensions:[r.Ay,r.V6,r.rU,r.v6,r.Re,r.Tx,r.HC,r.DY,r.GS,[r.X6,{options:{levels:[1,2,3]}}],r.d8,r.EK,r.bo,r.nv,r.U1]}},mounted:function(){this.getDishes(),this.getIngredients(),this.getRations(),this.getDepartments()},methods:{getDishes:function(){var t=this;return o(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/dishes").then((function(e){t.dishes=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getIngredients:function(){var t=this;return o(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/ingredients").then((function(e){t.ingredients=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getRations:function(){var t=this;return o(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/rations").then((function(e){t.rations=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getDepartments:function(){var t=this;return o(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/departments").then((function(e){t.departments=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},action:function(){1===this.edit?this.update():this.store()},store:function(){var t=this;axios.post("/api/dishes",this.dish).then((function(e){e.data.status?(t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"green",type:"success"}),t.close(),t.getDishes()):t.errors=e.data.errors})).catch((function(e){console.log(e),t.errors=e.response.data.errors}))},update:function(){var t=this;axios.patch("/api/dishes/"+this.dish.id,this.dish).then((function(e){e.data.status?(t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"green",type:"success"}),t.close(),t.getDishes()):t.errors=e.data.errors})).catch((function(e){console.log(e),t.errors=e.response.data.errors}))},close:function(){this.dialog=!1,this.edit=-1,this.dish={name:"",ration_id:0,description:"",ingredient_ids:[]},this.errors=[]},editItem:function(t){this.edit=1,this.dish=t,this.dialog=!0}}};const c=(0,i(1900).Z)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",[i("v-col",[i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.dialog=!0}}},[t._v("\n                Добавить блюдо\n            ")])],1)],1),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("\n                            #\n                        ")]),t._v(" "),i("th",{staticClass:"text-left"},[t._v("\n                            Название\n                        ")]),t._v(" "),i("th",{staticClass:"text-left"},[t._v("\n                            Рацион\n                        ")]),t._v(" "),i("th",{staticClass:"text-left"},[t._v("\n                            Ингредиенты\n                        ")]),t._v(" "),i("th",{staticClass:"text-left"},[t._v("\n                            Actions\n                        ")])])]),t._v(" "),i("tbody",t._l(t.dishes,(function(e,n){return i("tr",{key:e.id},[i("td",[t._v(t._s(n+1))]),t._v(" "),i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",[t._v(t._s(e.ration?e.ration.name:""))]),t._v(" "),i("td",[t._v(t._s(e.ingredient_ids.length))]),t._v(" "),i("td",[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return t.editItem(e)}}},[t._v("\n                                mdi-pencil\n                            ")])],1)])})),0)]},proxy:!0}])})],1)],1),t._v(" "),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"primary"}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1),t._v(" "),i("v-toolbar-title",[t._v("Блюдо")])],1),t._v(" "),i("v-card-title",[i("span",{staticClass:"text-h5"},[t._v(" "+t._s(1===t.edit?"Редактировать":"Добавить"))])]),t._v(" "),i("v-card-text",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{sm:"12",lg:"6"}},[i("v-text-field",{attrs:{label:"Название","error-messages":t.errors.name,outlined:"",clearable:""},model:{value:t.dish.name,callback:function(e){t.$set(t.dish,"name",e)},expression:"dish.name"}}),t._v(" "),i("v-select",{attrs:{items:t.rations,"item-text":"name","item-value":"id",label:"Рацион","error-messages":t.errors.ration_id,clearable:"",outlined:""},model:{value:t.dish.ration_id,callback:function(e){t.$set(t.dish,"ration_id",e)},expression:"dish.ration_id"}}),t._v(" "),i("v-select",{attrs:{items:t.departments,"item-text":"name","item-value":"id",label:"Цех","error-messages":t.errors.department_id,clearable:"",outlined:""},model:{value:t.dish.department_id,callback:function(e){t.$set(t.dish,"department_id",e)},expression:"dish.department_id"}}),t._v(" "),i("tiptap-vuetify",{attrs:{extensions:t.extensions},model:{value:t.dish.description,callback:function(e){t.$set(t.dish,"description",e)},expression:"dish.description"}})],1),t._v(" "),i("v-col",{attrs:{sm:"12",lg:"6"}},[i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id","error-messages":t.errors.ingredient_ids,clearable:"",outlined:"","small-chips":"",label:"Ингредиенты",multiple:""},model:{value:t.dish.ingredient_ids,callback:function(e){t.$set(t.dish,"ingredient_ids",e)},expression:"dish.ingredient_ids"}}),t._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:t.action}},[t._v("\n                                    Сохранить\n                                ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},9774:(t,e,i)=>{i.r(e),i.d(e,{default:()=>y});var n=i(7757),s=i.n(n),r=i(9669),a=i.n(r),o=i(7014),l=i(2725);const c={name:"DietDescription",props:["diet","diet_old"]};var d=i(1900);const u=(0,d.Z)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",[i("v-col",{attrs:{sm:"12",md:"6"}},[t.diet?i("v-card",{staticClass:"mb-4",attrs:{color:"lime lighten-4"}},[i("v-card-text",[t._v("\n                    "+t._s(t.diet)+"\n                ")])],1):t._e()],1),t._v(" "),i("v-col",{attrs:{sm:"12",md:"6"}},[t.diet_old?i("v-card",{attrs:{color:"red lighten-4"}},[i("v-card-text",[t._v("\n                    "+t._s(t.diet_old)+"\n                ")])],1):t._e()],1)],1)],1)}),[],!1,null,null,null).exports;function v(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}const g={name:"Blacklist",props:{ingredients:Array,categories:Array,blacklist:Array,mix:Array},data:function(){return{applied_categories:[]}},methods:{applyCategories:function(){var t=this,e=this.applied_categories.map((function(e){return t.categories.find((function(t){return t.id===e})).ingredient_ids}));e=(e=e.flat()).concat(this.blacklist),this.mix=v(new Set(e))},removeIngredientFromBlacklist:function(t){this.mix=this.mix.filter((function(e){return e!==t}))},saveBlacklist:function(){var t=this;a().post("/api/blacklist",{id:this.order.id,blacklist:this.mix}).then((function(e){t.getSelectDetailsByOrder(t.order.id),t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"green",type:"success"})})).catch((function(e){console.log(e),t.errors=e.response.data.errors}))}}};const _=(0,d.Z)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",{staticClass:"mb-5"},[t._v("Черный список")]),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12",lg:"4"}},[i("v-autocomplete",{attrs:{items:t.categories,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Категории",multiple:""},on:{change:t.applyCategories},model:{value:t.applied_categories,callback:function(e){t.applied_categories=e},expression:"applied_categories"}})],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12",lg:"8"}},[i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"","small-chips":"",label:"Ингредиенты",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("v-chip",t._b({attrs:{small:"","input-value":e.selected,close:""},on:{click:e.select,"click:close":function(i){return t.removeIngredientFromBlacklist(e.item.id)}}},"v-chip",e.attrs,!1),[t._v("\n                        "+t._s(e.item.name)+"\n                    ")])]}}]),model:{value:t.mix,callback:function(e){t.mix=e},expression:"mix"}}),t._v(" "),i("v-btn",{attrs:{dark:""},on:{click:t.saveBlacklist}},[t._v("\n                Сохранить\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports;i(9935);function m(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function p(t,e,i,n,s,r,a){try{var o=t[r](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,s)}function b(t){return function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function a(t){p(r,n,s,a,o,"next",t)}function o(t){p(r,n,s,a,o,"throw",t)}a(void 0)}))}}const x={name:"Select",props:{id:Number,r_id:Number},components:{Blacklist:_,DietDescription:u,Stat:l.Z,SelectModal:o.Z},data:function(){return{items:[{text:"Селекты",disabled:!1,href:"/select"},{text:"Детали",disabled:!0}],order:{},stat:{},loading:!0,select_loading:!1,dialog:!1,dialog2:!1,dialog3:!1,ingredients:[],categories:[],dishes:[],dish:{},duty_dish_id:null,rations:[],select_previous:[],select_result:[],previous:{},result:{dish_name:""},blacklist:[],mix:[],wishlist:[],wish_ids:[],tag:"",tags:[],cuisine:{},ration:{},applied_categories:[],ration_id:null,ingredient_categories:[],chosen_category:{},chosen_ingredient:{},target_ingredient:null,tablewares:[],errors:[],r1_val:null,r2_val:null}},mounted:function(){this.getSelectDetailsByOrder(),this.getCuisine(),this.getCategories(),this.getIngredients(),this.getTablewares(),this.getRations(),this.getDishesByRation(this.r_id)},computed:{isDutyDishId:function(){return this.dish.id===this.duty_dish_id},isDisabled:function(){return this.result.dish_id===this.dish.id},tw_id:function(){return this.result.tableware?this.result.tableware.id:this.ration.tableware_id}},methods:{getIngredients:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/ingredients").then((function(e){t.ingredients=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getTablewares:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/tableware").then((function(e){t.tablewares=e.data.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getCategories:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/categories").then((function(e){t.categories=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getRations:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/rations").then((function(e){t.rations=e.data,t.ration=t.rations.find((function(e){return e.id===t.r_id}))})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getCuisine:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/cuisine/duty").then((function(e){t.cuisine=e.data.cuisine})).catch((function(e){t.loading=!1,t.$store.dispatch("showAlert",{isVisible:!0,msg:e.message,color:"error",type:"error"})}));case 2:case"end":return e.stop()}}),e)})))()},setTW:function(t){var e=this;a().post("/api/select/tableware",{order_id:this.order.id,ration_id:this.r_id,dish_id:this.dish.id,cuisine_id:this.cuisine.id,tableware_id:t}).then((function(t){t.data.status||e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"error",type:"error"}),e.getSelectDetailsByOrder()})).catch((function(t){console.log(t)}))},getSelectDetailsByOrder:function(){var t=this;return b(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/select/order/"+t.id).then((function(e){t.order=e.data.order,t.previous=e.data.previous,t.result=e.data.result,t.blacklist=e.data.blacklist,t.mix=e.data.blacklist,t.wishlist=e.data.wishlist,t.wish_ids=Object.keys(t.result).length>0?t.result.selected_wishes:[]})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getDishesByRation:function(t){var e=this;return b(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e.ration_id=e.r_id,i.next=3,a().get("/api/dishes/ration/"+t).then((function(i){e.dishes=i.data,e.dishes.length>0?(t===e.r_id&&(e.duty_dish_id=e.dishes[0].id),e.dish=e.dishes.find((function(t){return t.id===e.result.dish_id})),e.dish||(e.dish=e.dishes[0])):e.dish.ingredients=[]})).catch((function(t){console.log(t)}));case 3:case"end":return i.stop()}}),i)})))()},applyCategories:function(){var t=this,e=this.applied_categories.map((function(e){return t.categories.find((function(t){return t.id===e})).ingredient_ids}));e=(e=e.flat()).concat(this.blacklist),this.mix=m(new Set(e))},removeIngredientFromBlacklist:function(t){this.mix=this.mix.filter((function(e){return e!==t}))},saveBlacklist:function(){var t=this;a().post("/api/blacklist",{id:this.order.id,blacklist:this.mix}).then((function(e){t.getSelectDetailsByOrder(t.order.id),t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"green",type:"success"})})).catch((function(e){console.log(e),t.errors=e.response.data.errors}))},addTag:function(){var t=this;a().post("/api/wishlist",{id:this.order.id,tag:this.tag}).then((function(e){t.getSelectDetailsByOrder(t.order.id),t.tag="",t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:e.data.status?"green":"error",type:e.data.status?"success":"error"}),t.errors=[]})).catch((function(e){t.errors=e.response.data.errors}))},removeTag:function(t){var e=this;a().post("/api/wishlist/remove",{id:this.order.id,tag:t.wish}).then((function(i){e.wishlist=e.wishlist.filter((function(e){return e!==t})),e.getSelectDetailsByOrder(e.order.id),e.$store.dispatch("showAlert",{isVisible:!0,msg:i.data.msg,color:i.data.status?"green":"error",type:i.data.status?"success":"error"})})).catch((function(t){console.log(t),e.errors=t.response.data.errors}))},addWishToSelect:function(t){var e=this;a().post("/api/select/wish",{order_id:this.order.id,ration_id:this.ration_id,cuisine_id:this.cuisine.id,dish_id:this.dish.id,w_id:t}).then((function(t){e.wish_ids=t.data.data,e.getSelectDetailsByOrder()})).catch((function(t){e.errors=t.response.data.errors}))},hasResultIncludeIngredient:function(t){return 0===Object.keys(this.result).length||this.result.ingredient_ids.includes(t)},setDish:function(){var t=this;a().post("/api/select/add/dish",{id:this.id,dish_id:this.dish.id}).then((function(e){e.data.status||t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"error",type:"error"}),t.result=e.data.data,t.getSelectDetailsByOrder()})).catch((function(t){console.log(t)}))},getAnalogName:function(t){return this.result.ingredients.find((function(e){return e.pivot.analog_id===t})).name},hasAnalog:function(t){return!!this.result.ingredient_ids&&this.result.ingredients.findIndex((function(e){return e.pivot.analog_id===t}))>=0},addIngredient:function(t){var e=this;a().post("/api/select/add/ingredient",{select_id:this.result.id,ingredient_id:t}).then((function(t){t.data.status||e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"error",type:"error"}),e.result=t.data.data,e.getSelectDetailsByOrder(e.order.id)})).catch((function(t){console.log(t)}))},removeIngredient:function(t){var e=this;a().post("/api/select/remove/ingredient",{order_id:this.order.id,ration_id:this.r_id,cuisine_id:this.cuisine.id,dish_id:this.dish.id,ingredient_id:t}).then((function(t){t.data.status||e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"error",type:"error"}),e.result=t.data.data,e.getSelectDetailsByOrder(e.order.id)})).catch((function(t){console.log(t)}))},showAnalogs:function(t){this.getCategoriesByIngredient(t),this.target_ingredient=t,this.dialog2=!0},getAnalogId:function(t){return this.result.ingredients.find((function(e){return e.pivot.analog_id===t})).id},replaceIngredient:function(t){var e=this;a().post("/api/select/replace/ingredient",{order_id:this.order.id,ration_id:this.r_id,cuisine_id:this.cuisine.id,dish_id:this.dish.id,ingredient_id:this.target_ingredient,analog_id:t}).then((function(t){t.data.status&&(e.result=t.data.select,e.getSelectDetailsByOrder(e.order.id),e.closeDialog2())})).catch((function(t){console.log(t)}))},returnIngredient:function(t){var e=this;a().post("/api/select/return/ingredient",{select_id:this.result.id,ingredient_id:t,analog_id:this.getAnalogId(t)}).then((function(t){t.data.status&&(e.result=t.data.select,e.getSelectDetailsByOrder(e.order.id))})).catch((function(t){console.log(t)}))},getCategoriesByIngredient:function(t){var e=this;return b(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a().get("/api/categories/ingredient/"+t).then((function(t){e.ingredient_categories=t.data})).catch((function(t){console.log(t)}));case 2:case"end":return i.stop()}}),i)})))()},getSelectColor:function(t,e){var i=t.result.find((function(t){return t.r_id===e}));return i?i.color:"lime lighten-2"},isActive:function(t,e){var i=t.result.find((function(t){return t.r_id===e}));return!i||i.is_active},getSelectName:function(t){if(this.select_result.length>0){var e=this.select_result.find((function(e){return e.ration_id===t}));return e?e.dish_name:""}return""},closeDialog:function(){this.dish={},this.dialog=!1,this.getSelectDetailsByOrder(this.order.id)},closeDialog2:function(){this.ingredient_categories=[],this.chosen_category={},this.chosen_ingredient={},this.target_ingredient=null,this.r1_val=null,this.dialog2=!1},saveDetails:function(){var t=this;a().post("/api/select/add/details",this.result).then((function(e){t.result=e.data.data,t.dialog3=!1})).catch((function(t){console.log(t)}))},exportExcel:function(){},r1:function(){this.replaceIngredient(this.r1_val)},addExtra:function(t){var e=this;t&&a().post("/api/select/add/extra",{select_id:this.result.id,ingredient_id:t}).then((function(t){e.result=t.data.data,e.getSelectDetailsByOrder(e.order.id),e.r2_val=null})).catch((function(t){console.log(t)}))},removeExtra:function(t){var e=this;a().post("/api/select/remove/extra",{select_id:this.result.id,ingredient_id:t}).then((function(t){e.result=t.data.data,e.getSelectDetailsByOrder(e.order.id)})).catch((function(t){console.log(t)}))},showIngredient:function(t){var e=this;a().post("/api/select/show/ingredient",{select_id:this.result.id,ingredient_id:t}).then((function(t){e.result=t.data.data})).catch((function(t){console.log(t)}))},hideIngredient:function(t){var e=this;a().post("/api/select/hide/ingredient",{select_id:this.result.id,ingredient_id:t}).then((function(t){e.result=t.data.data})).catch((function(t){console.log(t)}))}}};const y=(0,d.Z)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-breadcrumbs",{attrs:{large:"",items:t.items}}),t._v(" "),i("v-row",[i("v-col",[i("h3",[t._v(t._s(t.order.name)+" - "+t._s(t.ration.name)+" - "+t._s(t.order.tag))])])],1),t._v(" "),i("diet-description",{attrs:{diet:t.order.diet,diet_old:t.order.diet_old}}),t._v(" "),i("v-divider",{staticClass:"my-8"}),t._v(" "),i("h3",{staticClass:"mb-5"},[t._v("Черный список")]),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12",lg:"4"}},[i("v-autocomplete",{attrs:{items:t.categories,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Категории",multiple:""},on:{change:t.applyCategories},model:{value:t.applied_categories,callback:function(e){t.applied_categories=e},expression:"applied_categories"}})],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12",lg:"8"}},[i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"","small-chips":"",label:"Ингредиенты",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("v-chip",t._b({attrs:{small:"","input-value":e.selected,close:""},on:{click:e.select,"click:close":function(i){return t.removeIngredientFromBlacklist(e.item.id)}}},"v-chip",e.attrs,!1),[t._v("\n                            "+t._s(e.item.name)+"\n                        ")])]}}]),model:{value:t.mix,callback:function(e){t.mix=e},expression:"mix"}}),t._v(" "),i("v-btn",{attrs:{dark:""},on:{click:t.saveBlacklist}},[t._v("\n                    Сохранить\n                ")])],1)],1),t._v(" "),i("h3",{staticClass:"my-5"},[t._v("Зеленый список")]),t._v(" "),i("v-row",{staticClass:"mb-4"},[i("v-col",{attrs:{sm:"12",lg:"4"}},[i("v-text-field",{attrs:{clearable:"",label:"Тэг",outlined:"","error-messages":t.errors.tag},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:t.addTag}},[t._v("\n                    Добавить\n                ")])],1),t._v(" "),i("v-col",{attrs:{sm:"12",lg:"8"}},t._l(t.wishlist,(function(e){return i("v-chip",{key:e.id,staticClass:"ma-2",attrs:{color:t.wish_ids.includes(e.id)?"lime":"",close:""},on:{click:function(i){return t.addWishToSelect(e.id)},"click:close":function(i){return t.removeTag(e)}}},[t._v("\n                    "+t._s(e.wish)+"\n                ")])})),1)],1),t._v(" "),i("v-divider",{staticClass:"my-6"}),t._v(" "),i("v-row",[i("v-col",[i("h2",{staticClass:"mb-2"},[t._v(t._s(t.cuisine.name)+" - "+t._s(t.ration.name))])])],1),t._v(" "),i("v-row",{staticClass:"py-3"},[t.previous?i("v-col",{attrs:{cols:"3"}},[i("h4",[t._v(t._s(t.previous.created_at))]),t._v(" "),i("span",[t._v(t._s(t.previous.cuisine))]),t._v(" "),t.previous.dish_name?i("v-card",{staticClass:"mb-5 mt-3",attrs:{color:"blue-grey lighten-5"}},[i("v-card-title",[t._v(t._s(t.previous.dish_name))]),t._v(" "),i("v-card-subtitle",[t._v(t._s(t.previous.description))])],1):t._e(),t._v(" "),i("v-list",{attrs:{dense:""}},t._l(t.previous.ingredients,(function(e,n){return i("v-list-item",{key:n,class:t.hasResultIncludeIngredient(e.id)?"yellow lighten-3":""},[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(n+1)+". "+t._s(e.name))])],1)],1)})),1)],1):t._e(),t._v(" "),i("v-col",{attrs:{cols:"5"}},[i("h4",[t._v("Сегодня")]),t._v(" "),i("span",[t._v(t._s(t.cuisine.name))]),t._v(" "),i("v-row",{staticClass:"mt-2"},[i("v-col",{attrs:{cols:"3"}},[i("v-select",{attrs:{items:t.rations,dense:"","item-text":"name","item-value":"id",outlined:"",label:"Рационы"},on:{change:function(e){return t.getDishesByRation(t.ration_id)}},model:{value:t.ration_id,callback:function(e){t.ration_id=e},expression:"ration_id"}})],1),t._v(" "),t.dish?i("v-col",{attrs:{cols:"6"}},[i("v-select",{attrs:{dense:"",items:t.dishes,"item-text":"name","return-object":"",outlined:"",label:"Блюда"},model:{value:t.dish,callback:function(e){t.dish=e},expression:"dish"}})],1):t._e(),t._v(" "),t.dish?i("v-col",{attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"primary",disabled:t.isDisabled},on:{click:t.setDish}},[t._v("\n                            выбрать\n                        ")])],1):t._e()],1),t._v(" "),t.dish?i("div",t._l(t.dish.ingredients,(function(e,n){return i("v-sheet",{key:e.id,staticClass:"pa-3 mb-3 flex justify-center",attrs:{elevation:"1",color:t.mix.includes(e.id)?"red lighten-3":""}},[i("div",{staticClass:"flex flex-row"},[i("p",{class:t.hasResultIncludeIngredient(e.id)?"":"text-decoration-line-through"},[t._v("\n                                "+t._s(n+1)+". "+t._s(e.name)+"\n                            ")]),t._v(" "),t.hasAnalog(e.id)?i("span",[t._v("\n                                "+t._s(t.getAnalogName(e.id))+"\n                            ")]):t._e()]),t._v(" "),t.isDisabled?i("div",{staticClass:"mt-2"},[t.hasAnalog(e.id)?t._e():i("v-btn",{class:t.hasResultIncludeIngredient(e.id)?"red white&#45;&#45;text":"green",attrs:{"x-small":""},on:{click:function(i){t.hasResultIncludeIngredient(e.id)?t.removeIngredient(e.id):t.addIngredient(e.id)}}},[t._v("\n                                "+t._s(t.hasResultIncludeIngredient(e.id)?"Убрать":"Вернуть")+"\n                            ")]),t._v(" "),t.isDutyDishId?t._e():i("v-btn",{staticClass:"ml-2",attrs:{"x-small":""},on:{click:function(i){t.hasAnalog(e.id)?t.returnIngredient(e.id):t.showAnalogs(e.id)}}},[t._v("\n                                "+t._s(t.hasAnalog(e.id)?"Отменить замену":"Замена")+"\n                            ")])],1):t._e()])})),1):t._e()],1),t._v(" "),i("v-col",{attrs:{cols:"4"}},[i("h4",[t._v("Итог")]),t._v(" "),i("span",[t._v(t._s(t.cuisine.name))]),t._v(" "),t.result?i("div",[i("v-card",{staticClass:"mb-5 mt-3",attrs:{color:"blue-grey lighten-3"}},[i("v-card-title",[t._v(t._s(t.result.dish_name))]),t._v(" "),i("v-card-subtitle",[t._v(t._s(t.result.weight?t.result.weight+" грамм":""))]),t._v(" "),i("v-card-text",[t._v("\n                            "+t._s(t.result.description)+"\n                        ")]),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog3=!0}}},[t._v("\n                                редактировать\n                            ")])],1)],1),t._v(" "),2===t.result.status?i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Добавить ингредиент"},on:{change:t.addExtra},model:{value:t.r2_val,callback:function(e){t.r2_val=e},expression:"r2_val"}}):t._e(),t._v(" "),t._l(t.result.ingredients,(function(e,n){return i("v-sheet",{key:n,staticClass:"pa-3 mb-3",attrs:{elevation:"1",color:t.mix.includes(e.id)?"red lighten-3":""}},[i("v-row",[e.pivot.is_visible?i("v-col",{attrs:{cols:"1"}},[i("v-icon",{attrs:{left:""}},[t._v("\n                                    mdi-checkbox-marked-circle\n                                ")])],1):t._e(),t._v(" "),i("v-col",[t._v("\n                                "+t._s(n+1)+". "+t._s(e.name)+"\n                            ")])],1),t._v(" "),i("v-row",[e.pivot.is_editable?i("v-col",[i("v-btn",{attrs:{"x-small":""},on:{click:function(i){return t.removeExtra(e.id)}}},[t._v("убрать")])],1):t._e()],1)],1)}))],2):t._e(),t._v(" "),i("div",{staticClass:"mt-4"},[i("h5",{staticClass:"mb-1"},[t._v("Выбрать посуду:")]),t._v(" "),i("div",{staticClass:"d-flex"},t._l(t.tablewares,(function(e){return i("v-sheet",{key:e.id,staticClass:"mr-4 v-alert--border",staticStyle:{cursor:"pointer"},style:e.id===t.tw_id?"border: 3px solid dodgerblue":"",attrs:{rounded:""},on:{click:function(i){return t.setTW(e.id)}}},[i("img",{staticClass:"rounded",attrs:{src:/storage/+e.img,width:"64",height:"64"}})])})),1)])])],1),t._v(" "),i("v-dialog",{attrs:{scrollable:"",persistent:"","max-width":"800px"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[i("v-card",[i("v-card-title",[t._v("\n                    Замена\n                ")]),t._v(" "),i("v-card-text",{staticStyle:{height:"400px"}},[i("v-row",{staticClass:"mt-3"},[i("v-col",{attrs:{cols:"12",md:"4"}},[t.ingredient_categories.length>0?i("v-select",{attrs:{items:t.ingredient_categories,label:"Категории","item-text":"name","return-object":"",outlined:"",clearable:""},model:{value:t.chosen_category,callback:function(e){t.chosen_category=e},expression:"chosen_category"}}):t._e(),t._v(" "),i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Ингредиенты"},on:{change:t.r1},model:{value:t.r1_val,callback:function(e){t.r1_val=e},expression:"r1_val"}})],1),t._v(" "),t.chosen_category?i("v-col",t._l(t.chosen_category.ingredients,(function(e,n){return i("v-sheet",{key:n,staticClass:"pa-3 mb-3 flex justify-center",class:t.mix.includes(e.id)?"red lighten-3":"",attrs:{elevation:"1"}},[i("p",[t._v("\n                                    "+t._s(n+1)+". "+t._s(e.name)+"\n                                ")]),t._v(" "),i("div",{staticClass:"mt-2"},[i("v-btn",{attrs:{"x-small":""},on:{click:function(i){return t.replaceIngredient(e.id)}}},[t._v("\n                                        выбрать\n                                    ")])],1)])})),1):t._e()],1)],1),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.closeDialog2}},[t._v("\n                        Закрыть\n                    ")])],1)],1)],1),t._v(" "),i("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.dialog3,callback:function(e){t.dialog3=e},expression:"dialog3"}},[i("v-card",[i("v-card-title",[t._v("\n                    Редактировать\n                ")]),t._v(" "),i("v-card-text",[i("v-text-field",{attrs:{clearable:"",outlined:"",label:"Название"},model:{value:t.result.dish_name,callback:function(e){t.$set(t.result,"dish_name",e)},expression:"result.dish_name"}}),t._v(" "),i("v-text-field",{attrs:{type:"number",clearable:"",outlined:"",label:"Вес(грамм)"},model:{value:t.result.weight,callback:function(e){t.$set(t.result,"weight",e)},expression:"result.weight"}}),t._v(" "),i("v-textarea",{attrs:{outlined:"",clearable:"",label:"Дополнительная информация"},model:{value:t.result.description,callback:function(e){t.$set(t.result,"description",e)},expression:"result.description"}})],1),t._v(" "),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog3=!1}}},[t._v("\n                        Закрыть\n                    ")]),t._v(" "),i("v-btn",{attrs:{color:"primary",text:""},on:{click:t.saveDetails}},[t._v("\n                        Сохранить\n                    ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports},2725:(t,e,i)=>{i.d(e,{Z:()=>s});const n={name:"Stat",props:{stat:Object}};const s=(0,i(1900).Z)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-chip",{staticClass:"mr-2",attrs:{color:"teal","text-color":"white",label:""}},[t._v("\n        Итого: "+t._s(t.stat.total)+"\n    ")]),t._v(" "),i("v-chip",{staticClass:"mr-2",attrs:{label:""}},[t._v("\n        XS: "+t._s(t.stat.xs)+"\n    ")]),t._v(" "),i("v-chip",{staticClass:"mr-2",attrs:{label:""}},[t._v("\n        S: "+t._s(t.stat.s)+"\n    ")]),t._v(" "),i("v-chip",{staticClass:"mr-2",attrs:{label:""}},[t._v("\n        M: "+t._s(t.stat.m)+"\n    ")]),t._v(" "),i("v-chip",{staticClass:"mr-2",attrs:{label:""}},[t._v("\n        L: "+t._s(t.stat.l)+"\n    ")]),t._v(" "),i("v-chip",{attrs:{label:""}},[t._v("\n        XL: "+t._s(t.stat.xl)+"\n    ")])],1)}),[],!1,null,null,null).exports},7014:(t,e,i)=>{i.d(e,{Z:()=>v});var n=i(7757),s=i.n(n),r=i(9669),a=i.n(r);function o(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function c(t,e,i,n,s,r,a){try{var o=t[r](a),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,s)}function d(t){return function(){var e=this,i=arguments;return new Promise((function(n,s){var r=t.apply(e,i);function a(t){c(r,n,s,a,o,"next",t)}function o(t){c(r,n,s,a,o,"throw",t)}a(void 0)}))}}const u={name:"SelectModal",props:{dialog:Boolean,order:Object,cuisine:Object,ration:Object,blacklist:Array,wishlist:Array,result:Object,previous:Object,dishes:Array,dish:Object},data:function(){return{categories:[],ingredients:[],applied_categories:[],errors:[],tag:"",rations:[],ration_id:null}},created:function(){this.getCategories(),this.getIngredients(),this.getRations()},methods:{getIngredients:function(){var t=this;return d(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/ingredients").then((function(e){t.ingredients=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getCategories:function(){var t=this;return d(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/categories").then((function(e){t.categories=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getRations:function(){var t=this;return d(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a().get("/api/rations/required").then((function(e){t.rations=e.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},applyCategories:function(){var t=this,e=this.applied_categories.map((function(e){return t.categories.find((function(t){return t.id===e})).ingredient_ids}));e=(e=e.flat()).concat(this.blacklist),this.$emit("update-blacklist",o(new Set(e)))},remove:function(t){var e=this.blacklist.filter((function(e){return e!==t}));this.$emit("update-blacklist",e)},addTag:function(){var t=this;a().post("/api/wishlist",{id:this.order.id,tag:this.tag}).then((function(e){t.$emit("add-tag",t.tag),t.tag="",t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:e.data.status?"green":"error",type:e.data.status?"success":"error"}),t.errors=[]})).catch((function(e){t.errors=e.response.data.errors}))},removeTag:function(t){var e=this;a().post("/api/wishlist/remove",{id:this.order.id,tag:t}).then((function(i){e.$emit("remove-tag",t),e.tag="",e.$store.dispatch("showAlert",{isVisible:!0,msg:i.data.msg,color:i.data.status?"green":"error",type:i.data.status?"success":"error"})})).catch((function(t){e.errors=t.response.data.errors}))},hasResultIncludeIngredient:function(t){if(this.result.ingredient_ids)return this.result.ingredient_ids.includes(t)},setDish:function(){var t=this;a().post("/api/select/add/dish",{select_id:this.result.id,ration_id:this.ration.iiko_id,dish_id:this.dish.id}).then((function(e){e.data.status||t.$store.dispatch("showAlert",{isVisible:!0,msg:e.data.msg,color:"error",type:"error"}),t.$emit("update-result",e.data.data)})).catch((function(t){console.log(t)}))},showAnalogs:function(t){this.getCategoriesByIngredient(t),this.target_ingredient=t,this.dialog2=!0},hasAnalog:function(t){if(this.result.ingredient_ids)return this.result.ingredients.findIndex((function(e){return e.pivot.analog_id===t}))>=0},getAnalogId:function(t){return this.result.ingredients.find((function(e){return e.pivot.analog_id===t})).id},getAnalogName:function(t){return this.result.ingredients.find((function(e){return e.pivot.analog_id===t})).name},addIngredient:function(t){var e=this;a().post("/api/select/add/ingredient",{select_id:this.result.id,ingredient_id:t}).then((function(t){t.data.status||e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"error",type:"error"}),e.result=t.data.data})).catch((function(t){console.log(t)}))},removeIngredient:function(t){var e=this;a().post("/api/select/remove/ingredient",{select_id:this.result.id,ingredient_id:t}).then((function(t){t.data.status||e.$store.dispatch("showAlert",{isVisible:!0,msg:t.data.msg,color:"error",type:"error"}),e.result=t.data.data})).catch((function(t){console.log(t)}))},replaceIngredient:function(t){var e=this;a().post("/api/select/replace/ingredient",{select_id:this.result.id,ingredient_id:this.target_ingredient,analog_id:t}).then((function(t){t.data.status&&(e.result=t.data.select,e.closeDialog2())})).catch((function(t){console.log(t)}))},returnIngredient:function(t){var e=this;a().post("/api/select/return/ingredient",{select_id:this.result.id,ingredient_id:t,analog_id:this.getAnalogId(t)}).then((function(t){t.data.status&&(e.result=t.data.select)})).catch((function(t){console.log(t)}))},getDishesByRation:function(t){this.$emit("update-dishes",t)}}};const v=(0,i(1900).Z)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{dark:"",color:"primary"}},[i("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){return t.$emit("close")}}},[i("v-icon",[t._v("mdi-close")])],1),t._v(" "),i("v-toolbar-title",[t._v("Диета - "+t._s(t.ration.name))]),t._v(" "),i("v-spacer")],1),t._v(" "),i("v-card-title",[t._v(t._s(t.order.name)+" - "+t._s(t.order.tag))]),t._v(" "),t.order?i("v-card-text",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12",lg:"4   "}},[t.order.diet?i("v-card",{staticClass:"mb-4",attrs:{color:"lime lighten-4"}},[i("v-card-text",[t._v("\n                                        "+t._s(t.order.diet)+"\n                                    ")])],1):t._e()],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12",lg:"4   "}},[t.order.diet_old?i("v-card",{attrs:{color:"red lighten-4"}},[i("v-card-text",[t._v("\n                                        "+t._s(t.order.diet_old)+"\n                                    ")])],1):t._e()],1)],1),t._v(" "),i("v-divider",{staticClass:"my-8"}),t._v(" "),i("h3",{staticClass:"mb-5"},[t._v("Черный список")]),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"12",lg:"4"}},[i("v-autocomplete",{attrs:{items:t.categories,"item-text":"name","item-value":"id",clearable:"",outlined:"",label:"Категории",multiple:""},on:{change:t.applyCategories},model:{value:t.applied_categories,callback:function(e){t.applied_categories=e},expression:"applied_categories"}})],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12",lg:"8"}},[i("v-autocomplete",{attrs:{items:t.ingredients,"item-text":"name","item-value":"id",clearable:"",outlined:"","small-chips":"",label:"Ингредиенты",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[i("v-chip",t._b({attrs:{small:"","input-value":e.selected,close:""},on:{click:e.select,"click:close":function(i){return t.remove(e.item.id)}}},"v-chip",e.attrs,!1),[t._v("\n                                            "+t._s(e.item.name)+"\n                                        ")])]}}],null,!1,2740152871),model:{value:t.blacklist,callback:function(e){t.blacklist=e},expression:"blacklist"}}),t._v(" "),i("v-btn",{attrs:{dark:""},on:{click:function(e){return t.$emit("save-blacklist")}}},[t._v("\n                                    Сохранить\n                                ")])],1)],1),t._v(" "),i("h3",{staticClass:"my-5"},[t._v("Зеленый список")]),t._v(" "),i("v-row",{staticClass:"mb-4"},[i("v-col",{attrs:{sm:"12",lg:"4"}},[i("v-text-field",{attrs:{clearable:"",label:"Тэг",outlined:"","error-messages":t.errors.tag},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" "),i("v-btn",{attrs:{color:"primary"},on:{click:t.addTag}},[t._v("\n                                    Добавить\n                                ")])],1),t._v(" "),i("v-col",{attrs:{sm:"12",lg:"8"}},t._l(t.wishlist,(function(e){return i("v-chip",{key:e,staticClass:"ma-2",attrs:{close:""},on:{"click:close":function(i){return t.removeTag(e)}}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),1)],1),t._v(" "),i("v-divider",{staticClass:"my-6"}),t._v(" "),i("h2",{staticClass:"mb-6"},[t._v(t._s(t.cuisine.name)+" - "+t._s(t.ration.name))]),t._v(" "),i("v-row",{staticClass:"py-3"},[Object.keys(t.previous).length>0?i("v-col",{attrs:{cols:"3"}},[i("h4",[t._v(t._s(t.previous.created_at))]),t._v(" "),i("span",[t._v(t._s(t.previous.cuisine))]),t._v(" "),t.previous.dish_name?i("v-card",{staticClass:"mb-5 mt-3",attrs:{color:"blue-grey lighten-5"}},[i("v-card-title",[t._v(t._s(t.previous.dish_name))]),t._v(" "),i("v-card-subtitle",[t._v(t._s(t.previous.description))])],1):t._e(),t._v(" "),i("v-list",{attrs:{dense:""}},t._l(t.previous.ingredients,(function(e,n){return i("v-list-item",{key:n,class:t.hasResultIncludeIngredient(e.id)?"yellow lighten-3":""},[i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(n+1)+". "+t._s(e.name))])],1)],1)})),1)],1):t._e(),t._v(" "),i("v-col",{attrs:{cols:"5"}},[i("h4",[t._v("Сегодня")]),t._v(" "),i("span",[t._v(t._s(t.cuisine.name))]),t._v(" "),i("v-row",{staticClass:"mt-2"},[i("v-col",{attrs:{cols:"3"}},[i("v-select",{attrs:{items:t.rations,dense:"","item-text":"name","item-value":"iiko_id",outlined:"",label:"Рационы"},on:{change:function(e){return t.getDishesByRation(t.ration_id)}},model:{value:t.ration_id,callback:function(e){t.ration_id=e},expression:"ration_id"}})],1),t._v(" "),t.dish?i("v-col",{attrs:{cols:"6"}},[i("v-select",{attrs:{dense:"",items:t.dishes,"item-text":"name","return-object":"",outlined:"",label:"Блюда"},model:{value:t.dish,callback:function(e){t.dish=e},expression:"dish"}})],1):t._e(),t._v(" "),t.dish?i("v-col",{attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"primary",small:"",disabled:t.dish.id===t.result.dish_id},on:{click:t.setDish}},[t._v("\n                                            Выбрать\n                                        ")])],1):t._e()],1),t._v(" "),t.dish&&t.result?i("div",t._l(t.dish.ingredients,(function(e,n){return i("v-sheet",{key:e.id,staticClass:"pa-3 mb-3 flex justify-center",attrs:{elevation:"1",color:t.blacklist.includes(e.id)?"red lighten-3":""}},[i("div",{staticClass:"flex flex-row"},[i("p",{class:t.hasResultIncludeIngredient(e.id)?"":"text-decoration-line-through"},[t._v("\n                                                "+t._s(n+1)+". "+t._s(e.name)+"\n                                            ")]),t._v(" "),t.hasAnalog(e.id)?i("span",[t._v("\n                                                    "+t._s(t.getAnalogName(e.id))+"\n                                                ")]):t._e()]),t._v(" "),t.dish.id===t.result.dish_id?i("div",{staticClass:"mt-2"},[t.hasAnalog(e.id)?t._e():i("v-btn",{class:t.hasResultIncludeIngredient(e.id)?"red white&#45;&#45;text":"green",attrs:{"x-small":""},on:{click:function(i){t.hasResultIncludeIngredient(e.id)?t.removeIngredient(e.id):t.addIngredient(e.id)}}},[t._v("\n                                                "+t._s(t.hasResultIncludeIngredient(e.id)?"Убрать":"Вернуть")+"\n                                            ")]),t._v(" "),t.hasResultIncludeIngredient(e.id)||t.hasAnalog(e.id)?i("v-btn",{staticClass:"ml-2",attrs:{"x-small":""},on:{click:function(i){t.hasAnalog(e.id)?t.returnIngredient(e.id):t.showAnalogs(e.id)}}},[t._v("\n                                                "+t._s(t.hasAnalog(e.id)?"Отменить замену":"Замена")+"\n                                            ")]):t._e()],1):t._e()])})),1):t._e()],1)],1)],1)],1):t._e()],1)],1)],1)}),[],!1,null,null,null).exports}}]);